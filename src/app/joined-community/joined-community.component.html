<div class="joined-community-wrapper">
  <div class="link-card box" *ngIf="!mobileView && templateStyle == CommunityListMatCardTypeClass.simple">
    <div class="header">
      <div>
        Joined Communities
      </div>
      <div *ngIf="followsCommunities">{{followsCommunities+" "}}<i class="fa fa-group"></i></div>
    </div>
    <ng-container *ngIf="!loadingCommunities && joinedCommunity?.length; else noCommunities">
      <div class="links" *ngFor="let item of joinedCommunity">
        <app-profile-icon [isCommunityAvatar]="true" [avatar]="item.avatarDTO" [height]="35" [sizeRef]="'small'"
          [slug]="item?.slug">
        </app-profile-icon>
        <app-username [isCommunity]="true" [username]="item.communityName" [slug]="item.slug"></app-username>
      </div>
      <div class="row" *ngIf="joinedCommunity?.length >= 4">
        <div class="col-4">
        </div>
        <div class="col-8">
          <app-view-more-button (click)="openCommunityDialog(joinedCommunity)">
          </app-view-more-button>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="loadingCommunities">
      <div class="list-item" *ngFor="let i of listItems">
        <ngx-skeleton-loader count="1" appearance="circle"></ngx-skeleton-loader>
        <ngx-skeleton-loader class="w-100" count="1" appearance="line"></ngx-skeleton-loader>
      </div>
    </ng-container>
    <ng-template #noCommunities>
      <div *ngIf="!loadingCommunities">
        <p *ngIf="isOwner">
          You have not joined any communities yet.
        </p>
        <p *ngIf="!isOwner">
          User has not joined any communities yet.
        </p>
      </div>
    </ng-template>
  </div>
  <div *ngIf="!mobileView && templateStyle == CommunityListMatCardTypeClass.expansion">
    <mat-expansion-panel class="user-community-expansion-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <span class="header">Joined Communities</span>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="loadingCommunities">
        <div class="list-item" *ngFor="let i of listItems">
          <ngx-skeleton-loader count="1" appearance="circle"></ngx-skeleton-loader>
          <ngx-skeleton-loader class="w-100" count="1" appearance="line"></ngx-skeleton-loader>
        </div>
      </div>
      <div *ngIf="joinedCommunity?.length; else noCommunities">
        <div *ngIf="!loadingCommunities">
          <ng-container *ngIf="joinedCommunity?.length">
            <div class="links" *ngFor="let item of joinedCommunity">
              <app-profile-icon [isCommunityAvatar]="true" [avatar]="item.avatarDTO" [height]="35" [sizeRef]="'small'"
                [slug]="item.slug">
              </app-profile-icon>
              <app-username [isCommunity]="true" [username]="item.communityName" [slug]="item.slug"></app-username>
            </div>
          </ng-container>
          <div class="row">
            <div class="col">
              <app-view-more-button (click)="openCommunityDialog(joinedCommunity)">
              </app-view-more-button>
            </div>
          </div>
        </div>
      </div>
      <ng-template #noCommunities>
        <div *ngIf="!loadingCommunities">
          <p *ngIf="isOwner">
            You have not joined any communities yet.
          </p>
          <p *ngIf="!isOwner">
            User has not joined any communities yet.
          </p>
        </div>
      </ng-template>
    </mat-expansion-panel>
  </div>

  <div *ngIf="mobileView">
    <div class="user-joined-community" [ngClass]="mobileView ? 'mobile' : 'desktop'">
      <h5>Joined Communities
        <div class="create-btn">
          <span class="community-counts" *ngIf="followsCommunities">{{followsCommunities+" "}}<i
              class="fa fa-group"></i></span>
          <mat-icon (click)="openCommunityDialog(joinedCommunity)" *ngIf="joinedCommunity?.length > 2">arrow_forward
          </mat-icon>
        </div>
      </h5>
      <owl-carousel-o [options]="customOptions">
        <ng-container *ngFor="let list of joinedCommunity;let i=index">
          <ng-template carouselSlide [id]="i">
            <app-community-card-mobile-view [mobileView]="mobileView" [community]="list">
            </app-community-card-mobile-view>
          </ng-template>
        </ng-container>
      </owl-carousel-o>
      <!--    <div class="mobile_action_btn" *ngIf="!loadingCommunities" >-->
      <!--      <button mat-stroked-button (click)="openCommunityDialog(joinedCommunity)">Load more</button>-->
      <!--    </div>-->
      <!--loader-->
      <div class="row card-loader" *ngIf="loadingCommunities">
        <div class="col">
          <app-community-card-loader></app-community-card-loader>
        </div>
        <div class="col">
          <app-community-card-loader></app-community-card-loader>
        </div>
      </div>
      <!--loader ends-->
    </div>

  </div>
</div>