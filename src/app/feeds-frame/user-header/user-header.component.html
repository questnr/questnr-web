<!--header-->

<header id="extended-nav" class="nav-main-container">
  <div class="toolbar" role="banner">
    <button class="toggle" mat-button (click)="toggleMenu()">
      <mat-icon>menu</mat-icon>
    </button>
    <div class="logo" routerLink="/feeds">Questnr<span class="com">.com</span></div>
    <div class="spacer"></div>

    <div class="search-wrapper">
      <input type="text" placeholder="Type here to search..." [formControl]="hashtagInput">
      <mat-icon (click)="searchHashtag()">search</mat-icon>
      <div class="suggestions">
        <mat-progress-bar mode="indeterminate" color="accent" *ngIf="isLoading" style="height: 2px"></mat-progress-bar>
        <button class="w-100" mat-button *ngFor="let item of hashtags">{{item.hashTagValue}}</button>
      </div>
    </div>

    <div class="spacer"></div>

    <button mat-button class="h-100" [matMenuTriggerFor]="notificationsMenu" [style.color]="notificationColor"
      (click)="readNewNotification()">
      <mat-icon *ngIf="!hasNewNotifications">notifications</mat-icon>

      <mat-icon *ngIf="hasNewNotifications">notifications_active</mat-icon>
    </button>

    <!-- notifications_active, notifications_none -->
    <mat-menu #notificationsMenu="matMenu" [overlapTrigger]="false" xPosition="before">
      <div class="notification-wrap">
        <app-notification-item *ngFor="let item of notifications" [notification]="item"
          (remove)="removeNotification($event)"></app-notification-item>
        <button *ngIf="notifications?.length> 0 && !endOfNotifications" mat-button class="w-100"
          (click)="getNotification(); $event.stopPropagation();"> Load more</button>
        <p *ngIf="endOfNotifications"> No more Notifications </p>
      </div>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="menu" class="d-none d-sm-block d-md-block d-lg-block profile-btn" Z>
      <div>
        <div class="icon">
          <img [src]="auth.profileImg" />
        </div>
        <span>{{profile?.sub}}</span>
      </div>
    </button>

    <mat-menu #menu="matMenu" [overlapTrigger]="false" xPosition="before">
      <button mat-menu-item>
        <mat-icon>account_circle</mat-icon>
        <span>Profile</span>
      </button>
      <button mat-menu-item [matMenuTriggerFor]="settings">
        <mat-icon>settings</mat-icon>
        <span>Settings</span>
      </button>
      <button (click)="logOut()" mat-menu-item>
        <mat-icon>exit_to_app</mat-icon>
        <span>Log Out</span>
      </button>
    </mat-menu>
    <mat-menu #settings="matMenu">
      <button mat-menu-item>Terms & Conditions</button>
      <button mat-menu-item>Privacy Policy</button>
      <button mat-menu-item>FAQ</button>
    </mat-menu>
  </div>
</header>