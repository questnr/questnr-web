<app-user-header></app-user-header>

<div class="site-body">
  <div class="container" [ngClass]="{'container-mobile' : mobileView}">
    <div class="flex-frame">
      <div class="flex-7" [ngClass]="{'flex-7-mobile' : mobileView}">
        <div class="community-feeds-container">
          <div class="com-ban-img-container">
            <div class="change-comm-img">
              <mat-icon (click)="previewImage()" *ngIf="owner == 'owned'">camera</mat-icon>
              <input type="file" style="display: none" id="communityImageSrc" (change)="onFileChange($event)">
            </div>
            <img [src]="communityImage" alt="banner" class="comm-ban-img" *ngIf="communityImage" >
<!--            <img [src]="comUpdatedAvatar" alt="editedImage" *ngif="!isImageEdited">-->
            <div class="com-ban-overlay"></div>
            <div class="com-head-container">
              <h1>{{communityDTO?.communityName}}</h1>
              <h3  (click)="openCommunityDesc(communityDTO?.description, communityImage)">{{communityDTO?.description}}</h3>
            </div>
          </div>
        </div>
        <div class="com-dets">
          <div class="btn-container">
<!--            <button mat-stroked-button> Owner</button>-->
            <button mat-stroked-button>
              <mat-icon>add</mat-icon>Invite</button>

          </div>
          <div class="btn-container float-right">
            <button mat-stroked-button style="background: green; color: #fff" *ngIf="owner ==='followed'; else notFollowing" (click)="unfollowThisCommunity()">
              <mat-icon>check</mat-icon>
              Following
            </button>
            <ng-template #notFollowing>
              <button mat-stroked-button (click)="followThisCommunty()" *ngIf="owner != 'owned'" > Follow</button>
            </ng-template>
          </div>
        </div>
        <div class="flex-view">
          <div class="flex-3" *ngIf="!mobileView">
            <app-user-profile-card [avatarLink]="communityDTO?.ownerUserDTO?.avatarDTO?.avatarLink" [relationship]="communityDTO?.ownerUserDTO?.userMeta?.relationShipType"
            [userId]="communityDTO?.ownerUserDTO?.userId" [username]="communityDTO?.ownerUserDTO?.username" [slug]="communityDTO?.ownerUserDTO?.slug"></app-user-profile-card>
            <app-floating-footer></app-floating-footer>
          </div>
          <div class="flex-7" [ngClass]="{'flex-7-mobile' : mobileView}">
            <div class="community-feeds">
              <app-post-feed (postData)="postFeed($event)" [isCommunityPost]=true [communityId]="communityDTO?.communityId" *ngIf="owner === 'owned' || owner ==='followed'"></app-post-feed>
              <ng-container *ngIf="userFeeds?.length; else noFeeds">
                <div class="feed-wrap" *ngFor="let feed of userFeeds">
                  <app-recommended-feeds *ngIf="feed" [feed]="feed"></app-recommended-feeds>
                </div>
                <p class="text-center" *ngIf="feeds?.length===1 && feeds[0] === null">No Feeds Found...!</p>
              </ng-container>
              <app-feeds-loader *ngIf="loading"></app-feeds-loader>
              <ng-template #noFeeds>
                <p class="text-center" style="margin-top :30px" *ngIf="feeds?.length===1 && feeds[0] === null">No Feeds Found...!</p>
              </ng-template>

            </div>
          </div>
        </div>
      </div>


      <div class="flex-3" *ngIf="!mobileView">
        <app-community-users ></app-community-users>
        <app-usercommunity [userId]="loggedInUserId" [relation]="owner"></app-usercommunity>
        <app-suggestion></app-suggestion>
        <app-trending></app-trending>
        <app-sponsered></app-sponsered>
      </div>
    </div>
  </div>
</div>








